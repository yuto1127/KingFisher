# 本番環境セットアップガイド

## デバッグ機能の無効化

本アプリケーションは開発環境と本番環境で異なる動作をします。

### フロントエンド（Flutter）

#### 開発環境でのみ表示される機能
- **デバッグ情報カード**: ホームページにユーザー情報、ロール情報、認証状態を表示
- **デバッグログインスキップボタン**: ログインページに表示される開発用ログイン機能

#### 本番環境での動作
- デバッグ情報は表示されません
- デバッグログイン機能は無効化されます
- `kDebugMode`フラグにより自動的に制御されます

### バックエンド（Laravel）

#### 本番環境での設定

1. **環境変数の設定**
   ```bash
   APP_ENV=production
   APP_DEBUG=false
   LOG_LEVEL=error
   ```

2. **ログレベルの調整**
   - 本番環境では`LOG_LEVEL=error`に設定
   - 詳細なデバッグログは記録されません
   - エラーログのみが記録されます

3. **ログローテーション**
   - `LOG_CHANNEL=daily`で設定
   - 30日間のログを保持（`LOG_DAILY_DAYS=30`）

### セキュリティ考慮事項

1. **デバッグ情報の保護**
   - 本番環境ではユーザー情報が画面に表示されません
   - ログにも機密情報は記録されません

2. **エラーハンドリング**
   - 本番環境では詳細なエラー情報は表示されません
   - ユーザーフレンドリーなエラーメッセージが表示されます

3. **ログ管理**
   - 本番環境ではエラーログのみ記録
   - ログファイルは定期的にローテーションされます

### デプロイ時の確認事項

1. **環境変数の確認**
   - `APP_DEBUG=false`
   - `APP_ENV=production`
   - `LOG_LEVEL=error`

2. **ログディレクトリの権限**
   - `storage/logs`ディレクトリの書き込み権限を確認

3. **キャッシュのクリア**
   ```bash
   php artisan config:cache
   php artisan route:cache
   php artisan view:cache
   ```

### トラブルシューティング

#### デバッグ情報が表示される場合
1. `APP_DEBUG=false`が設定されているか確認
2. フロントエンドが本番ビルドされているか確認
3. ブラウザのキャッシュをクリア

#### ログが記録されない場合
1. `storage/logs`ディレクトリの権限を確認
2. `LOG_CHANNEL`と`LOG_LEVEL`の設定を確認
3. ディスク容量を確認 